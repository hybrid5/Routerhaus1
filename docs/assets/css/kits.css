/* RouterHaus Kits â€” Enhanced Glassmorphism, Interactivity, and Modal */

/* --- Layout primitives --- */
:root {
  --radius-lg: var(--radius, 16px);
  --gap: 12px;
}

.container {
  max-width: 1200px;
  margin-inline: auto;
  padding: 16px;
}

.page-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-block: 12px 8px;
}
.page-header .brand {
  font-size: 1.5rem;
  font-weight: 700;
}
.page-header .brand .subtle {
  opacity: .7;
  font-weight: 600;
  margin-left: .25rem;
}

.header-actions {
  display: flex;
  gap: 8px;
}
.btn {
  border-radius: var(--radius-lg);
  padding: .5rem .9rem;
  border: 1px solid var(--border, rgba(255,255,255,.08));
  background: var(--card, rgba(255,255,255,.06));
  backdrop-filter: blur(14px) saturate(180%);
  -webkit-backdrop-filter: blur(14px) saturate(180%);
  box-shadow: var(--shadow, 0 8px 24px rgba(0,0,0,.2));
  color: var(--text-1, #fff);
  cursor: pointer;
  transition: all 0.2s ease;
}
.btn:hover { filter: brightness(1.08); transform: translateY(-1px); }
.btn.primary { background: var(--primary, #6ea8fe); color: #0b1020; }
.btn.ghost { background: transparent; border: 1px solid var(--border, rgba(255,255,255,.15)); }
.btn.glass { background: var(--card, rgba(255,255,255,.06)); }
.btn.small { padding: .35rem .6rem; font-size: .85rem; }

.badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 1.5rem;
  font-size: .75rem;
  border-radius: 999px;
  padding: 0 .45rem;
  background: var(--accent, #87f);
  color: #000;
}

/* --- Kits page layout --- */
.kits-layout {
  display: grid;
  grid-template-columns: 320px minmax(0, 1fr);
  gap: 16px;
}
.kits-layout > * { min-width: 0; }
.content { min-width: 0; }

/* Sidebar (desktop) */
.filters-rail {
  position: sticky;
  top: 12px;
  height: calc(100dvh - 24px);
  overflow: auto;
  padding: 12px;
  border-radius: var(--radius-lg);
  background: var(--card, rgba(255,255,255,.04));
  border: 1px solid var(--border, rgba(255,255,255,.08));
  backdrop-filter: blur(18px) saturate(180%);
}
.filters-header { display: flex; align-items: baseline; justify-content: space-between; }
.filters-header small { opacity: .8; }
.filters-form .facet { margin-block: 12px; }
.facet h3 { font-size: .95rem; opacity: .9; margin-bottom: 6px; }
.facet .options { display: grid; grid-template-columns: 1fr; gap: 6px; }
.facet .options.two-cols { grid-template-columns: 1fr 1fr; gap: 6px; }
.divider { height: 1px; background: var(--border, rgba(255,255,255,.15)); margin: 8px 0; opacity: .25; }

/* Quick chips */
.chips { display: flex; flex-wrap: wrap; gap: 6px; }
.chip {
  border-radius: 999px;
  padding: .25rem .55rem;
  background: var(--card, rgba(255,255,255,.06));
  border: 1px solid var(--border, rgba(255,255,255,.12));
  font-size: .85rem;
  line-height: 1;
  transition: all 0.15s ease;
}
.chip:hover { background: var(--accent, #87f); color: #000; }
.chip.active { outline: 2px solid var(--accent, #87f); }
.active-chips { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 8px; }
.active-chips .chip { cursor: pointer; }

/* Toolbar */
.toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 8px;
  padding: 8px 12px;
  border-radius: var(--radius-lg);
  background: var(--card, rgba(255,255,255,.06));
  border: 1px solid var(--border, rgba(255,255,255,.1));
  backdrop-filter: blur(14px) saturate(180%);
}
.sort { display: flex; align-items: center; gap: 8px; }
.sort select {
  padding: .4rem .6rem;
  border-radius: 8px;
  background: var(--card, rgba(255,255,255,.05));
  border: 1px solid var(--border, rgba(255,255,255,.15));
  color: var(--text-1, #fff);
}

/* Recommendations */
.recommendations { margin-block: 8px 16px; }
.recommendations:empty { display: none; }

/* Product grid & cards */
.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 12px;
}
@media (max-width: 1200px){ .product-grid { grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); } }
@media (max-width: 640px){ .product-grid { grid-template-columns: 1fr; } }

.product {
  padding: 12px;
  border-radius: var(--radius-lg);
  background: var(--card, rgba(255,255,255,.06));
  border: 1px solid var(--border, rgba(255,255,255,.1));
  backdrop-filter: blur(14px) saturate(180%);
  box-shadow: var(--shadow, 0 8px 24px rgba(0,0,0,.25));
  display: flex; flex-direction: column; gap: 8px; min-width: 0;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.product:hover { transform: translateY(-4px); box-shadow: var(--shadow, 0 12px 28px rgba(0,0,0,.35)); }
.product .product-header { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
.product .title { font-size: 1rem; font-weight: 600; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.product .product-media {
  width: 100%; aspect-ratio: 16/10; min-height: 160px;
  border-radius: 12px; overflow: hidden; background: rgba(255,255,255,.03);
  display: flex; align-items: center; justify-content: center;
}
.product .product-media img { width: 100%; height: 100%; object-fit: cover; display: block; }
.product .chips.line { gap: 6px; flex-wrap: wrap; }
.product .specs { margin: 6px 0 8px; padding-left: 18px; }
.product .specs li { margin: 2px 0; opacity: .9; }
.product .priceRow { display: flex; align-items: center; justify-content: space-between; gap: 8px; }

/* Compare bar */
.compare {
  position: fixed; bottom: 12px; left: 12px; right: 12px;
  display: flex; align-items: center; gap: 8px; padding: 8px 10px;
  border-radius: var(--radius-lg);
  background: var(--card, rgba(255,255,255,.08));
  border: 1px solid var(--border, rgba(255,255,255,.15));
  backdrop-filter: blur(14px) saturate(180%);
  z-index: 20;
}
.compare-items { display: flex; gap: 8px; flex-wrap: wrap; }
.compare .item {
  padding: .35rem .5rem; border-radius: 999px;
  background: var(--card, rgba(255,255,255,.06));
  border: 1px solid var(--border, rgba(255,255,255,.15));
  font-size: .85rem;
}

/* Keep space for compare */
.results { padding-bottom: 84px; }

/* --- Mobile filters (FAB + drawer) --- */
.fab {
  position: fixed; inset: auto 16px 16px auto;
  z-index: 40; border-radius: 999px; padding: .55rem .9rem;
  border: 1px solid var(--border, rgba(255,255,255,.12));
  background: var(--card, rgba(255,255,255,.06)); color: var(--text-1, #fff);
}
.drawer { position: fixed; inset: 0; display: none; z-index: 100; }
.drawer[aria-hidden="false"] { display: block; }
.drawer::before{
  content:""; position:absolute; inset:0;
  background: rgba(10,14,22,.45);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}
.drawer .drawer-panel {
  position: absolute; inset: auto 0 0 0;
  border-top-left-radius: 18px; border-top-right-radius: 18px;
  padding: 12px;
  background: var(--card, rgba(255,255,255,.95)); color: var(--text-1, #0b1020);
  border: 1px solid var(--border, rgba(255,255,255,.15));
  box-shadow: var(--shadow, 0 8px 24px rgba(0,0,0,.25));
  z-index: 101;
}
html[data-theme="dark"] .drawer .drawer-panel { background: rgba(22,28,42,.9); color: var(--text-1, #e3e8f7); }
.drawer-header { display: flex; align-items: center; justify-content: space-between; gap: 8px; padding: 4px 4px 8px; }
.drawer-body { max-height: 65dvh; overflow: auto; padding: 6px; }
.drawer-footer { display: flex; gap: 8px; justify-content: flex-end; padding: 8px 4px 4px; }
.icon-btn { border-radius: 8px; border: 1px solid var(--border, rgba(255,255,255,.15)); background: var(--card, rgba(255,255,255,.06)); padding: .3rem .5rem; color: inherit; }

/* Only show mobile FAB/drawer below breakpoint */
@media (min-width: 981px) { .fab, #filtersDrawer { display: none !important; } }

/* Collapse sidebar on mobile */
@media (max-width: 980px) {
  .kits-layout { grid-template-columns: 1fr; }
  .filters-rail { display: none; }
}

/* --- Modal (dialog) --- */
.modal {
  width: min(92vw, 560px);
  border: none;
  padding: 0;
  border-radius: 18px;
  background: var(--card, rgba(255,255,255,.92));
  color: var(--text-1, #0b1020);
  box-shadow: 0 28px 80px rgba(0,0,0,.45), 0 8px 24px rgba(0,0,0,.25);
  overflow: hidden;
  transform: translateY(6px) scale(.98);
  opacity: 0;
  transition: transform .12s ease, opacity .12s ease;
  backdrop-filter: blur(10px) saturate(140%);
  -webkit-backdrop-filter: blur(10px) saturate(140%);
}
html[data-theme="dark"] .modal{
  background: rgba(20,24,36,.94);
  color: #e8ecf8;
  border: 1px solid rgba(255,255,255,.10);
}
.modal.is-open{ transform: translateY(0) scale(1); opacity: 1; }

/* Strong backdrop that truly blocks behind content */
.modal::backdrop{
  background:
    radial-gradient(1200px 800px at 50% 30%, rgba(30,40,80,.45), transparent 70%),
    rgba(8,10,16,.72);
  backdrop-filter: blur(6px) saturate(120%);
  -webkit-backdrop-filter: blur(6px) saturate(120%);
  animation: modalScrimIn .15s ease;
}
@keyframes modalScrimIn{ from{ opacity: 0; } to{ opacity: 1; } }

/* Modal structure */
.modal .modal-content{ display: grid; grid-template-rows: auto 1fr auto; gap: 0; }
.modal-header{
  display: flex; align-items: center; justify-content: space-between; gap: 8px;
  padding: 14px 16px 10px;
  background: linear-gradient(0deg, rgba(255,255,255,.02), rgba(255,255,255,.06));
  border-bottom: 1px solid rgba(0,0,0,.06);
}
html[data-theme="dark"] .modal-header{
  background: linear-gradient(0deg, rgba(255,255,255,.02), rgba(255,255,255,.04));
  border-bottom: 1px solid rgba(255,255,255,.08);
}
#quizTitle{ font-size: 1.1rem; font-weight: 700; letter-spacing: .2px; margin: 0; }

.modal-close{
  border: 1px solid var(--border, rgba(255,255,255,.14));
  background: var(--card, rgba(255,255,255,.10));
  color: inherit;
  width: 36px; height: 36px;
  border-radius: 10px;
  display: grid; place-items: center;
  cursor: pointer;
  transition: background .15s ease, transform .1s ease;
}
.modal-close:hover{ background: rgba(127,127,127,.12); }
.modal-close:active{ transform: scale(.98); }

/* Body */
.quiz-body{ padding: 14px 16px 4px; display: grid; gap: 10px; }
.quiz-body label{ display: grid; gap: 6px; font-weight: 600; color: var(--text-1, #0b1020); }
html[data-theme="dark"] .quiz-body label{ color: #e8ecf8; }

.quiz-body select{
  padding: .55rem .6rem;
  border-radius: 12px;
  border: 1px solid var(--border, rgba(0,0,0,.12));
  background: var(--card, rgba(255,255,255,.88));
  color: inherit;
  transition: border-color .15s ease, background .15s ease, box-shadow .15s ease;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.35);
}
html[data-theme="dark"] .quiz-body select{
  background: rgba(26,32,48,.92);
  border-color: rgba(255,255,255,.12);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}
.quiz-body select:focus{
  outline: none;
  border-color: var(--primary, #6ea8fe);
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--primary, #6ea8fe) 30%, transparent);
}

/* Footer */
.modal-actions{
  display: flex; gap: 8px; justify-content: flex-end;
  padding: 10px 16px 14px;
  border-top: 1px solid rgba(0,0,0,.06);
  background: linear-gradient(0deg, rgba(255,255,255,.06), rgba(255,255,255,0));
}
html[data-theme="dark"] .modal-actions{
  border-top: 1px solid rgba(255,255,255,.08);
  background: linear-gradient(0deg, rgba(255,255,255,.04), rgba(255,255,255,0));
}
.modal-actions .btn{ border-radius: 12px; padding: .55rem .9rem; }

/* --- Utility --- */
.sr-only {
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px;
  overflow: hidden; clip: rect(0,0,0,0); border: 0;
}
.hide { display: none !important; }

@media (prefers-reduced-motion: reduce){
  .modal, .modal::backdrop{ transition: none !important; animation: none !important; }
}
